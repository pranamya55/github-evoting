<!--
  ~ (c) Copyright 2025 Swiss Post Ltd.
  -->
<h1 class="mb-4 fs-inherit d-flex align-items-center">
	<span aria-hidden="true" class="stepper-indicator">3</span>
	{{ 'choose.main.title' | translate }}
</h1>

<h2>
	{{ 'choose.main.selectchoices' | translate }}
</h2>
<p>
	{{ 'choose.main.expandcontesthelp' | translate }}
</p>

<form
	#chooseForm="ngForm"
	(ngSubmit)="review()"
	[formGroup]="voterAnswersFormGroup()"
	autocomplete="off"
	novalidate
	spellcheck="false"
>
	@for (
		texts of votesTexts()
			| concat: electionsTexts()
			| sortBy: 'votePosition/electionGroupPosition';
		track $index
	) {
		<div class="ballot-group my-4 my-sm-5">
			@if (isVoteTexts(texts) && texts; as voteTexts) {
				<vp-choose-vote formArrayName="voteAnswers" [voteTexts]="voteTexts" />
			}

			@if (isElectionTexts(texts) && texts; as electionTexts) {
				<section formArrayName="electionAnswers">
					<vp-choose-election-group
						[electionTexts]="electionTexts"
						class="d-flex flex-column gap-5"
					/>
				</section>
			}
		</div>
	}

	@if (voterAnswersFormGroup().invalid && chooseForm.submitted) {
		<div class="alert alert-warning" role="alert">
			<p class="mb-0">{{ 'choose.main.validation.top' | translate }}</p>
		</div>
	}

	<vp-footer [cancelMode]="CancelMode.CancelVote">
		<button class="btn btn-dark" type="submit">
			{{ 'choose.main.continuetoreview' | translate }}
			<vp-icon name="arrow-right" />
		</button>
	</vp-footer>
</form>
